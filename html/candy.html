<html>
<meta charset="UTF-8">
<head>
<title>Cartogram Pages - Eye Candy</title>
<link rel="stylesheet" type="text/css" href="cartogram.css">
<link href='https://fonts.googleapis.com/css?family=Noto+Serif:400,400italic,700,700italic' rel='stylesheet' type='text/css'>
<link href='electoral_red_blue.png' rel='icon' type='image/png'>
<script>
function include(file) {
	var request;
	request = new XMLHttpRequest();
	request.open("GET", file, false);
	request.send();
	document.write(request.responseText);
}
</script>
</head>
<body>

<div id="header">
<script> include("header.html"); </script>
<p style="margin:0 0 0 10px;">
<hr>
</div>

<div id="leftnavigation">
<script> include("left.html"); </script>
</div>

<div id="content">
<b><u>Eye Candy</u></b>
<p>
The following material only makes sense if your browser supports
HTML&nbsp;5 embedded video capabilities,
so that you can see the video clips.
To some extent
all of this is simply <a href="http://www.dictionary.com/browse/eye--candy">eye candy</a>.
There's room in the world for eye candy.
All of the video clips load with the playback controls hidden.
Right click on the image to pull up a video menu.

<p style="clear:both;">
<div style="float:right; margin:0 0 15px 0;">
<video width="420" preload>
<source src="federal_holdings2.mp4" type="video/mp4">
Your browser does not support the video tag.
</video>
</div
<p><br/>
<u>Rotating a Prism Map</u>
<p>
One problem prism maps may experience is that
tall prisms near the camera obscure
shorter prisms behind them.
In the federal land holdings prism map,
the state of Washington is completely hidden by
the states in front of it.
A way to address that problem is to have
a video clip that rotates the three-dimensional prism map object.
<p>
The video clip to the right consists of 181 individual frames
generated by <i>cartogram.pl</i>
using the animation capabilities of POV-Ray.
For each image,
the camera and lightpositions are adjusted slightly.
The open source program <i>ffmpeg</i> is used to combine
those images into a video clip.
As is the case with POV-Ray,
only a trivial amount of <i>ffmpeg</i>'s capabilities are used.
The running time to produce the video clip was about 35 minutes.

<p style="clear:both;">
<div style="float:right; margin:0 0 0 0;">
<video width="420" preload>
<source src="federal_holdings1.mp4" type="video/mp4">
Your browser does not support the video tag.
</video>
</div>
<u>Growing a Prism Map</u>
<p>
Prism maps lend themselves to other sorts of eye candy.
One method is to use a video clip
to "grow" the prisms from a zero height to their full height.
An example of that,
using the prism map for western federal land holdings,
is shown in the clip to the right.
As in the rotation case above,
POV-Ray's animation capabilities are used to
produce the individual images.

<p style="clear:both;">
<div style="float:right; margin:0 0 15px 0;">
<video width="420" preload>
<source src="federal_holdings3.mp4" type="video/mp4">
Your browser does not support the video tag.
</video>
</div>
<u>Going Overboard</u>
<p>
Just because something <i>can</i> be done
doesn't mean it <i>should</i> be done.
<p>
There's a subtle difference in how the prisms in this map grow
compared to the previous example.
Here all prisms grow upwards at the same rate,
then stop when they reach their maximum value.
This video clip was constructed using an alternate process.
A small bit of external code ran <i>cartogram.pl</i> repeatedly and
copied the output file cartogram.png to a safe place
after each execution.
The entire Perl program is given in the following listing:
<pre>
use File::Copy;

$angle = 270;
$scale = 0;
$step = 0.02;
for ($seq = 0; $seq < 181; $seq++) {
    $frame = sprintf "video/frame%03d.png", $seq;
    print STDERR "$frame\n";
    $temp = sprintf "%.2f", $scale;
    $string  = "perl cartogram.pl -type prism -data federal_land_holdings/holdings.data ";
    $string .= "-map state_outlines/48.map ";
    $string .= "-zoom 55 -ypoint 100 -thick 0.75 ";
    $string .= "-width 800 -height 800 ";
    $string .= "-camera 1200,$angle,45 ";
    $string .= sprintf "-transform \'\(\$value > \$max_value * %.2f) ? \$max_value * %.2f : \$value\'", $scale, $scale;
    system "$string >/dev/null 2>/dev/null";
    copy("cartogram.png", $frame) || die "copy failed: $!";
    $angle += 2;
    $scale += $step;
    if ($scale < 0 or $scale > 1) {
        $step = -$step;
        $scale += $step;
    }
}

system "ffmpeg -i frame%03d.png -pix_fmt yuv420p -vf scale=600:-1 cartogram.mp4";
</pre>

<p style="clear:both;"><br/>
<div style="float:right; margin:0 0 15px 0;">
<video preload>
<source src="great_plains.mp4" type="video/mp4">
Your browser does not support the video tag.
</video>
</div
<p>
<u>Morphing a Contiguous Cartogram</u>
<p>
Hugely distorted contiguous cartograms make it very difficult to recognize
the underlying flat map.
The obvious way around that problem is to include images of both
the flat map and the cartogram.
For the web,
an alternative is a small video clip
showing a transformation of the flat map
into the cartogram.
<i>Cartogram.pl</i> includes (quite) limited capabilities for making such a clip.
An example is shown to the right.
It's important not to mistake this video clip as showing anything <i>temporal</i>,
eg,
population growth over decades.
It's just a fancier transition from one view to another,
much like PowerPoint doing any number of silly dissolves
to get from one slide to the next.
<p>
<i>Cartogram.pl</i> generates the video by keeping lists of the polygons
from both the flat map and the cartogram.
101&nbsp;images are generated by taking weighted averages
of the pairs of polygons.
Putting this capability into <i>cartogram.pl</i>
rather than using external code to run the calculations
was necessary to get things to change smoothly.
<p>
The example is based on
a county-level map of the ten US states that encompass
<a href="http://plainshumanities.unl.edu/encyclopedia/">the Great Plains</a>.
The Plains counties are in white.
There is considerable debate about exactly what area
the term "Great Plains" covers&nbsp;<a href="#fn1" id="ref1">[1]</a>.
While the western edge is pretty clearly defined&nbsp;&ndash;
the Plains stop at the Rocky Mountains&nbsp;&ndash;
the eastern edge is more controversial.
<p>
The set of counties I use is derived from Wilson's paper
on Great Plains population dynamics&nbsp;<a href="#fn2" id="ref2">[2]</a>,
which in turn is derived from Trimble's geology work&nbsp;<a href="#fn3" id="ref3">[3]</a>.
I removed the counties from
Colorado's Front Range and
Texas's hill country
that Wilson had included.
Both of those areas have experienced huge population growth
that is not Plains-related,
and don't match the narrative I'm usually trying to tell.
<p>
Settlement of the Plains has been called
<a href="https://www.cpp.edu/~tgyoung/rs510/Grt_Plains.pdf">the largest agricultural miscalculation</a>&nbsp;[PDF]
in American history.
The population of the Great Plains has been declining since 1930.
The cartogram&nbsp;&ndash;
the end point of the video clip&nbsp;&ndash;
resizes the counties based on their 2010 population.
The population of the Plains counties is so low
compared to the cities just to the east and west
that it's not possible to recognize the underlying map.
Watching the transition from the flat map to the cartogram
demonstrates just how extreme the population differences are.
In that sense,
the video clip is more than just eye candy.

<p style="clear:both;">
<hr style="width:200px; margin:0px;">
<p>
<span id="fn1">[1]</span>
"Where Are the Great Plains? A Cartographic Analysis,"
Sonja Rossum and Stephen Lavin,
<i>Professional Geographer</i> <b>52(3)</b>,
543-552 (2000).
<a href="#ref1">&#8617;</a>
<p>
<span id="fn2">[2]</span>
"Population Dynamics of the Great Plains: 1950 to 2007,"
Steven G. Wilson,
U.S. Census Bureau (2009).
<a href="#ref2">&#8617;</a>
<p>
<span id="fn3">[3]</span>
"The Geologic Story of the Great Plains,"
Donald E. Trimble,
U.S. Geological Survey Bulletin 1493 (1980).
<a href="#ref3">&#8617;</a>

<p style="clear:both;">
<br/>
<a href="index.html">Next: Back to the Beginning</a>

<br/><br/><br/>
Last updated Mar 4, 2018<br/>
<script> include("footer.html"); </script>

</div>
</body>
</html>
